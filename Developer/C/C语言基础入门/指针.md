# 指针

### 什么是指针？

**指针也就是内存地址，指针变量是用来存放内存地址的变量**。就像其他变量或常量一样，必须在使用指针存储其他变量地址之前，对其进行声明。指针变量声明的一般形式：

```c
type *var_name
```

`type`是指针的基类型，必须是一个有效的C数据类型；

`var_name`是指针变量的名称；

### 如何使用指针？

* 定义一个指针变量
* 把变量地址赋值给指针
* 访问指针变量中可用地址的值*

```c
#include <stdio.h>

int main ()
{
    int var = 20;   /* 实际变量的声明 此时的 VAR 这个变量是存在某个地址的，地址对应某个内存单元，该单元中存储了数据20 */
    int *ip;         /* 指针变量的声明 定义了一个指针 即一个内存单元的地址变量 */

    ip = &var;      /* 在指针变量中存储 var 的地址 就是将地址值赋值给指针这个变量*/

    /* 在指针变量中存储的地址 利用&符号直接输出了var所存储的数据的内存单元的地址*/
    printf("Address of var variable: %p\n", &var );
    
    /* 在指针变量中存储的地址 ip代表的是这个赋值到的地址的值 所以输出的是地址值 */
    printf("Address stored in ip variable: %p\n", ip );
    
    /* 使用指针访问值 *ip代表的是定义到这个内存单元之后，内存单元中所存储的数据的值也就是将20赋值给var中20这个值 */
    printf("Value of *ip variable: %d\n", *ip );

    return 0;
}
```

```
var 变量的地址: 0x7ffeeef168d8
ip 变量存储的地址: 0x7ffeeef168d8
*ip 变量的值: 20
```

#### 访问那个地址上的变量*

* *是一个单目运算符,用来访问指针的值所表示的地址上的变量
* 可以做右值也可以做左值
  * `int k = *p;`（`*p`作为一个整体，就可以看做一个int）
  * `*p=k+1;`

### C中的NULL指针

赋值为NULL值的指针被称为空指针。NULL指针是一个定义在标准库中的值为零的常量。

所有指针在创建时都要初始化，如果不知道他指向什么就将 0 赋值给他。**必须初始化指针，没有被初始化的指针被称为失控指针(野指针）**。

检查一个空指针，可以使用if语句：

```c
if(ptr)     /* 如果 p 非空，则完成 */
if(!ptr)    /* 如果 p 为空，则完成 */
```

### 函数参数表里的数组

* 传入函数参数表里的数组实际上是一个指针（数组的首地址）
  * `sizeof(a)==sizeof(int*)`
  * 但是可以用数组的运算符[]进行运算

#### 数组参数

以下四种函数原型是等价的：

* `int sum(int *ar,int n);`
* `int sum(int *,int);`
* `int sum(int ar[],int n);`
* `int sum(int [],int);`

不是说它们的类型是等价的，而是它们在参数表中出现是等价的，作为函数原型，它们是等价的。

### 数组变量是特殊的指针

* 数组变量本身表达地址，所以
  * `int a[10];int *p=a; //无需用&取地址`
  * 但是数组的单元表达的是变量，需要用&取地址 
  *  
