转载自：https://ruanyifeng.com/blog/2018/02/docker-tutorial.html

## 环境配置的问题

软件正确运行需要操作系统的设置，各种库和组件的安装。可能还要配置环境变量。

如果某些老旧的模块与当前环境不兼容，那就麻烦了。

> "它在我的机器可以跑了"(It works on my machine)

很多人想到，能不能从根本上解决问题，软件可以带环境安装？也就是说，安装的时候，把原始环境一模一样的复制过来。

## 虚拟机

虚拟机（virtual machine）是一种带环境安装的一种解决方案。它可以在一种操作系统里面运行另一种操作系统，比如在Windows系统里面运行Linux系统。

应用程序对此毫无感知，因为虚拟机看山去跟真实系统一模一样。

而对于底层系统来说，虚拟机就是一个普通文件，不需要了就删掉，对其它部分毫无影响。

但是使用带环境安装的虚拟机有几个缺点：

1. **资源占用多**

   虚拟机**独占**一部分内存和硬盘空间。运行的时候，其它程序就不能使用这些资源了，哪怕虚拟机里面的应用程序，真正使用的内存只有1MB，虚拟机依然需要几百MB的内存才能运行。

2. **冗余步骤多**

   虚拟机是完整的操作系统，一些系统级别的操作步骤，往往无法跳过，比如用户登录。

3. **启动慢**

   启动操作系统需要多久，启动虚拟机就需要多久，可能要等几分钟，应用程序才能真正运行。

## Linux容器

IBM Developer Works网站中关于 Linux容器（Linux Container, LXC ）的描述是这样的：

> 容器有效地将单个操作系统管理地资源划分到孤立地组中，以更好地在孤立地组之间1平衡有冲突地资源使用需求。与虚拟化相比，这样既不需要指令级模拟，也不需要即时编译。容器可以在核心CPU本地运行指令，而不需要任何专门的解释机制。此外，也避免了准虚拟化和系统调用替换中的复杂性。

**Linux容器不是模拟一个完整的操作系统，而是针对进程进行隔离**。或者说，在正常进程的外面套了一个保护套。对于容器里面的进程来说，他接触的各种资源都是虚拟的，从而实现与底层系统的隔离。

由于容器是进程级别的，相比虚拟机有很多优势。

1. **启动快**

   容器里面的应用，直接就是底层系统的一个进程，而不是虚拟机内部的进程。所以，启动容器相当于启动本机的一个进程，而不是启动一个操作系统，速度就快很多。

2. **资源占用少**

   容器只占用需要的资源，不占用那些没有用到的资源；虚拟机由于是完整的操作系统，不可避免要占用所有资源。另外，多个容器可以共享资源，虚拟机都是独享资源。

3. **体积小**

   容器只要包含用到的组件即可，而虚拟机是整个操作系统的打包,所以容器文化比虚拟机文件要小很多。总之，容器有点像轻量级的虚拟机，能够提供虚拟化的环境，但是成本开销小的多。

   ## Docker是什么？
   
   **Docker属于linux容器的一种封装，提供简单易用的容器使用接口。**它是目前最流行的Linux容器解决方案。
   
   ## Docker的用途
   
   Docker的主要用途，目前有三大类：
   
   （1）提供一次性的环境。比如。本地测试他人的软件，持续集成的时候提供单元测试和构建的环境。
   
   （2）提供弹性的云服务。Docker容器可以随开随关，很适合动态扩容和缩容。
   
   （3）组件微服务架构。通过多个容器，一台机器既可以跑多个服务，因此在本机可以模拟出微服务架构。

   
   

